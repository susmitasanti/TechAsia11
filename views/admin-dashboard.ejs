<!DOCTYPE html>
<html>

<head>
  <title>Admin-Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    .navbar {
    width: 100%;
    background-color: #22196b;
    overflow: auto;
  }
  
  /* Navbar links */
  .navbar a {
    float: left;
    text-align: center;
    padding: 20px;
    color: white;
    text-decoration: none;
    font-size: larger;
  }
  

  .navbar img{
    margin-top: 6px;
    margin-right:12px;
    float: left;
    height: 50px;
  }
  /* The dropdown container */
  .dropdown {
    float: left;
    overflow: hidden;
  }
  
  /* Dropdown button */
  .dropdown .dropbtn {
    font-size: larger;
    border: none;
    outline: none;
    color: white;
    padding: 20px;
    background-color: inherit;
    font-family: inherit; /* Important for vertical align on mobile phones */
    /* margin: 0; Important for vertical align on mobile phones */
  }
  
  
  /* Add a red background color to navbar links on hover */
  .navbar a:hover, .dropdown:hover .dropbtn {
    background-color: red;
  }
  
  /* Dropdown content (hidden by default) */
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
  }
  
  /* Links inside the dropdown */
  .dropdown-content a {
    float: none;
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    text-align: left;
  }
  
  /* Add a grey background color to dropdown links on hover */
  .dropdown-content a:hover {
    background-color: #ddd;
  }
  
  /* Show the dropdown menu on hover */
  .dropdown:hover .dropdown-content {
    display: block;
  }
#Profile{
  float: right;
  margin-right: 23px;
}
.upper{
	background-color:rgb(232, 238, 240);
	border-radius: 10px;
  	box-shadow: 0 14px 28px rgba(0,0,0,0.25), 
			0 10px 10px rgba(0,0,0,0.22);
	position: relative; 
	margin-top: 12px;
	overflow: hidden;
	min-height: 160px;
	max-height: 160px;
	padding: 10px;
}

.lower {
	background-color:rgb(232, 238, 240);
	border-radius: 10px;
  	box-shadow: 0 14px 28px rgba(0,0,0,0.25), 
			0 10px 10px rgba(0,0,0,0.22);
	position: relative; 
	overflow: auto;
	margin-top: 20px;
	min-height: 310px;
	max-height: 310px;
	padding: 10px;
}
.input-group{
	height: 40px;
	margin-top: 12px;
}

#search , #button{
  padding: 8px;
  font-size: 12px;
}
  </style>
</head>

<body>
  <div class="navbar">
    <!-- <img src="techAsia-LOGO_horizontal1028.png" alt=""> -->
    <a href="#" target="blank"><i class="fa fa-fw fa-search"></i> Test Data</a>
    <div class="dropdown">
      <button class="dropbtn"><i class="fa fa-fw fa-calculator"></i> Activity
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content">
        <a href="#">Statistics</a>
        <a href="#">Graphs</a>
      </div>
    </div>
    <a href="#" target="blank" id="Profile"><i class="fa fa-fw fa-user"></i> Profile</a>
  </div>
  <div class="container">
    <div class="upper">
      <div class="input-group">
        <input type="search" id="search" placeholder="Email" />
        <button type="button" class="btn btn-primary" id="button">
          <i class="fa fa-fw fa-search"></i>
        </button>
      </div>
    </div>
    <div class="lower">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>MAC ID</th>
            <th></th>


          </tr>
        </thead>

        <tbody>

          <% users.forEach(function(user) { %>
            <tr>
              <td>
                <%= user.id %>
              </td>
              <td>
                <%= user.name %>
              </td>
              <td>
                <%= user.email %>
              </td>
              <td>
                <%= user.phone %>
              </td>
              <td>
                <%= user.mac_id %>
              </td>
              <td>
                <!-- <a class='btn btn-primary btn-sm' href='update'>Update</a> -->
                <a class='btn btn-danger btn-sm deleteButton' onclick="deleteUser(this)"
                  email="<%= user.email %>">Delete</a>
              </td>
            </tr>
            <% }); %>
        </tbody>
      </table>

    </div>
  </div>
<script>
function deleteUser(button){
  var deleteUser=button.getAttribute("email")
  fetch(`http://localhost:3000/delete?email=${deleteUser}`, {
				method: "POST", // Replace with the appropriate HTTP method
				headers: {
					"Content-Type": "application/json",
				},
			})
				.then(response => response.json())
				.then(data => {
          var rowToRemove = button.closest("tr");
          rowToRemove.remove();
					console.log(data);
				})
				.catch(error => {
					// Handle any errors that occurred during the API request
					console.error(error);
				});

}
</script>
</body>

</html>